<div class="game-area">
    <div class="board-section">
        <div class="board-container">
            <div class="rank-labels">
                <span>8</span>
                <span>7</span>
                <span>6</span>
                <span>5</span>
                <span>4</span>
                <span>3</span>
                <span>2</span>
                <span>1</span>
            </div>
            {% include "partials/board.html" %}
            <div class="file-labels">
                <span>a</span>
                <span>b</span>
                <span>c</span>
                <span>d</span>
                <span>e</span>
                <span>f</span>
                <span>g</span>
                <span>h</span>
            </div>
        </div>
        
        {% if show_promotion %}
            {% include "partials/promotion.html" %}
        {% endif %}
        
        {% if game_result %}
            <div class="game-over-overlay">
                <div class="game-over-modal">
                    <h2>Game Over</h2>
                    <p class="result">
                        {% if game_result == '1-0' %}
                            White wins!
                        {% elif game_result == '0-1' %}
                            Black wins!
                        {% else %}
                            Draw!
                        {% endif %}
                    </p>
                    <p class="result-code">{{ game_result }}</p>
                    <div class="game-over-buttons">
                        <button class="btn btn-restart"
                                onclick="if(confirm('Start a new game with the same settings?')) { document.getElementById('restart-form').submit(); }">
                            Play Again
                        </button>
                        <a href="/" class="btn btn-quit">Back to Menu</a>
                    </div>
                </div>
            </div>
        {% endif %}
    </div>
    
    <div class="info-section">
        <div class="status-panel">
            <p class="turn-indicator">
                {% if game_result %}
                    Game Over
                {% else %}
                    {{ game.turn | title }} to move
                {% endif %}
            </p>
            {% if game.is_check and not game_result %}
                <p class="check-warning">Check!</p>
            {% endif %}
            {% for message in status_messages %}
                <p class="status-message">{{ message }}</p>
            {% endfor %}
        </div>
        
        <div class="controls-panel">
            {% if not game_result %}
                {% if hints_allowed %}
                    <button class="btn btn-hints{% if show_hints %} active{% endif %}"
                            hx-post="/api/toggle-hints"
                            hx-target="#game-container"
                            hx-swap="innerHTML"
                            {% if not selected_square %}disabled{% endif %}>
                        {% if show_hints %}Hide Hints{% else %}Show Hints{% endif %}
                    </button>
                    {% if not selected_square %}
                        <p class="hint-tip">Select a piece to enable hints</p>
                    {% endif %}
                {% else %}
                    <p class="hint-tip">Hints disabled in Hard mode</p>
                {% endif %}
            {% endif %}
            
            <button class="btn btn-undo"
                    hx-post="/api/undo"
                    hx-target="#game-container"
                    hx-swap="innerHTML">
                Undo
            </button>
            
            <button class="btn btn-restart"
                    onclick="if(confirm('Restart the game? All progress will be lost.')) { document.getElementById('restart-form').submit(); }">
                Restart
            </button>
            
            <button class="btn btn-quit"
                    onclick="if(confirm('Quit the game? All progress will be lost.')) { window.location.href = '/api/quit'; }">
                Quit
            </button>
        </div>
        
        {% include "partials/history.html" %}
        
        <div class="mode-panel">
            <p class="current-mode">Mode: {{ game_mode | title }}</p>
        </div>
    </div>
</div>

<!-- Hidden form for restart -->
<form id="restart-form" action="/api/restart" method="POST" style="display: none;"></form>
